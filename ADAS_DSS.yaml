#General info about the DSS
id: adas.dss
version: 0.0.4
name: IPM Decisions
url: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss
organization:
  name: ADAS
  country: England
  address: Titan 1 Offices
  postal_code: WV10 9RT
  city: Wolverhampton
  email: Hannah.Griffiths@adas.co.uk
  url: https://www.adas.uk/
languages:
- English
models:
- name: Cutworm Model
  id: DASGPA
  version: 0.0.3
  authors:
  - name: J. Bowden, J. Cochrane, B.J. Emmett, T.E. Minall, P.L Sherlock
    email: NA
    organization: Rothamsted Experimental Station
  pests:
  - DASGPA
  crops:
  - 3LETC
  - 3BEEC
  - SOLTU
  - BEAVV
  - BRSRR
  - BRSNA
  - DAUCS
  - PAVSA
  - ALLCE
  - ALLPO
  - CICIN
  - 1ASPG
  - APUGV
  - LYPES
  - FRAAN
  #lettuce crops, beet crops, potato, mangold, turnip, swede, carrot, parsnip, onion, leek, chicory, asparagus, celery, tomato, strawberry
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/dasgpa/Help/Api/POST-api-DASGPA
  description: "This model assesses Cutworm risk in crops based on the work of Bowden\
    \ et al., (1982). The model was originally devised to estimate an index of larval\
    \ survival to third instar, based on temperature rate of development relationships\
    \ and mortality due to daily rainfall.\nThe default model start date is defined\
    \ as the first day after 1st June where temperature exceeds 12 degrees. The model\
    \ will end on the 31st October.\nAny spray dates can be inputted into the model\
    \ and are deemed to be 100% effective at removing cutworm from the model.\nThe\
    \ model will return the number of batches that survive to the third instar, the\
    \ associated risk and the recommended action.\n\nSOURCE: \nASSUMPTIONS: \nREFERENCE: "
  citation:
  valid_spatial:
    countries:
    - GBR
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1002
      interval: 86400
    - parameter_code: 2001
      interval: 86400
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-06-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-10-31'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/dasgpa/api/DASGPA
    form_method: post
    content_type: application/json
    input_schema: |
      {
        "type":"object",
        "properties": { 
            "modelId": {"type": "string", "pattern":"^DASGPA$", "title": "Model Id", "default":"DASGPA", "description":"Must be DASGPA"},
            "weatherData": {
              "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
            },        
            "optionalData" :{  
              "title":"Optional parameters for the DSS",            
              "type": "object",
              "properties": {
                "sprayDates": {
                  "title": "Spray Dates",
                  "type": "object",
                  "properties":{
                    "date": {"type":"string","format": "date", "title": "Date of Spray (YYYY-MM-DD)"}
                    }
                }
              }
            }
        },
        "required": ["modelId"]
      }

    input_schema_categories:
      hidden:
      - modelId
  output:
    warning_status_interpretation:
    - explanation: |
      recommended_action: ''
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: |-
        Green warning indicates that the number of larval batches surviving to third instar is zero.
      recommended_action: No Action Required.
    - explanation: |-
        Yellow warning indicates that the larval batches surviving to third instar is between 1 and 4. 
      recommended_action: Should check field to obtain first-hand information about
        the need to take action.
    - explanation: |-
        Red warning indicates that there are over 4 larval batches surviving to third instar. 
      recommended_action: Advised to walk around your field as soon as possible to
        enable you to make a decision on which action to take.
    chart_heading: Larval Batches Surviving to Third Instar.
    chart_groups:
    - id: G1
      title: Instar Count
      result_parameter_ids:
      - Third_Instar_Count
    result_parameters:
    - id: Third_Instar_Count
      title: Larval Batches Surviving to Third Instar.
      description: Number of larval batches surviving to third instar.
      chart_info:
        default_visible: true
        unit: count
        chart_type: column
        color: green
##########
  purpose: ''
- name: Orange Wheat Blossom Midge Model
  id: SITDMO
  version: 0.0.3
  authors:
  - name: Guillaume Jacquemin, Sandrine Chavalle, Michel D Proft
    email: g.jacquemin@cra.wallonie.be, s.chavalle@cra.wallonie.be, m.deproft@cra.wallonie.be
    organization: Walloon Agricultural Research Centre
  pests:
  - SITDMO
  crops:
  - TRZAX
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/sitdmo/Help/Api/POST-api-SITDMO
  description: "This is a simple Phase Indication DSS based on the work of Jacquemin\
    \ et al., (2013).   \nIt uses daily temperature (degrees celsius) and rainfall\
    \ (mm) data to identify emergence in the Orange Wheat Blossom Midge. \nOptional\
    \ parameters can be inputted to set the thresholds at each of the phases of the\
    \ Orange Wheat Blossom Midge Lifecycle. If not inputted, the defaults will be\
    \ set.\nThe model only runs between the months May and June but requires weather\
    \ data from the 1st of January.\nThe model will return, what Phase the insect\
    \ is in. If the insect has emerged it will also provide the dates of the emergence.\
    \ It will also provide a risk and the recommended action.\n\nSOURCE: \nASSUMPTIONS:\
    \ \nREFERENCE: "
  citation:
  valid_spatial:
    countries:
    - GBR
    - BEL
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1002
      interval: 86400
    - parameter_code: 2001
      interval: 86400
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-01-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-06-30'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/sitdmo/api/SITDMO
    form_method: post
    content_type: application/json
    input_schema: |
      {
        "type":"object",
        "properties": {  
          "modelId": {"type": "string", "pattern":"^SITDMO$", "title": "Model Id", "default":"SITDMO", "description":"Must be SITDMO"},
          "weatherData": {
            "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
          },
          "optionalData" :{
            "title":"Optional parameters for the DSS",
            "type": "object",
            "properties": {
              "temp_threshold1": {"type": "number", "default":"3", "title": "Temperature Threshold Phase 1"},
              "DD1": {"type": "number", "default":"250", "title": "Degree Day Threshold Phase 1"},
              "temp_threshold2": {"type": "number", "default":"13", "title": "Temperature Threshold Phase 2"},
              "rain_threshold2": {"type": "number", "default":"0", "title": "Rainfall Threshold Phase 2"},
              "temp_threshold3": {"type": "number", "default":"7","title": "Temperature Threshold Phase 3"},
              "DD3": {"type": "number", "default":"160", "title": "Degree Day Threshold Phase 3"}
            }
          }  
        },
        "required": ["modelId"]
      }
    input_schema_categories:
      hidden:
      - modelId
      internal:
      - optionalData.temp_threshold1
      - optionalData.DD1
      - optionalData.temp_threshold2
      - optionalData.rain_threshold2
      - optionalData.temp_threshold3
      - optionalData.DD3
  output:
    warning_status_interpretation:
    - explanation: |
      recommended_action: ''
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: |-
        Green warning indicates that Orange Wheat Blossom Midge is in Phase 1 of development. There is currently a low risk.
      recommended_action: Revisit regularly as risk can change rapidly.
    - explanation: |-
        Yellow warning indicates that Orange Wheat Blossom Midge is in Phase 2 of development. 
      recommended_action: Should check field to obtain first-hand information about
        the need to act.
    - explanation: |-
        Red warning indicates that Orange Wheat Blossom Midge is in Phase 3 of development or have emerged.
      recommended_action: Advised to walk around your field as soon as possible to
        enable you to decide on which action to take.
    chart_heading: ''
    chart_groups:
    - id: ''
      title: ''
      result_parameter_ids:
      - ''
    result_parameters:
    - id: ''
      title: ''
      description: ''
      chart_info:
        default_visible: false
        unit: ''
        chart_type: scatter
        color: ''
##########
  purpose: ''
- name: Pollen Beetle Model
  id: MELIAE
  version: 0.0.3
  authors:
  - name: Hannah Griffiths
    email: Hannah.Griffiths@adas.co.uk
    organization: ADAS
  pests:
  - MELIAE
  crops:
  - BRSNN # EPPO code for rapeseed
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/meliae/Help/Api/POST-api-MELIAE
  description: "This model is based on the work of Ferguson et al., (2015) to predict\
    \ migration risk Pollen Beetle.\nDaily maximum air temperature is used to predict\
    \ Migration Risk. The default value of 15 degrees celsius is used, as that is\
    \ the temperature advised in the UK at which pollen beetles will fly. \nThreshold\
    \ however can also be overwritten by the user.\nThe model can only be used between\
    \ growth stage 51 and 59.\n\nSOURCE: \nASSUMPTIONS: \nREFERENCE: "
  citation:
  valid_spatial:
    countries: []
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1004
      interval: 86400
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-03-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-05-31'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/meliae/api/MELIAE
    form_method: post
    content_type: application/json
    input_schema: |
      {
        "type":"object",
        "properties": {  
         "modelId": {"type": "string", "pattern":"^MELIAE$", "title": "Model Id", "default":"MELIAE", "description":"Must be MELIAE"},
          "weatherData": {
            "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
          },
          "growthStage": {"type": "number"},
          "optionalData" :{   
            "title":"Optional parameters for the DSS", 
            "type": "object",
            "properties": {
              "temp_threshold": {"type": "number", "default":"15", "title": "Temperature Threshold"}
            }
          }
        },
        "required": ["modelId", "growthStage"]
      }  
    input_schema_categories:
      hidden:
      - modelId
      internal:
      - optionalData.temp_threshold
  output:
    warning_status_interpretation:
    - explanation: ''
      recommended_action: ''
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: |-
        Green Warning indicates that the maximum temperature is lower than threshold at which pollen beetles fly at air temperatures to crops. 
      recommended_action: Revisit regularly as risk can change rapidly.
    - explanation: ''
      recommended_action: ''
    - explanation: |-
        Red Warning indicates that the maximum temperature is higher than threshold at which pollen beetles fly at air temperatures to crops.
      recommended_action: Walk around your field to enable you to decide on which
        action to take.
    chart_heading: ''
    chart_groups:
    - id: ''
      title: ''
      result_parameter_ids:
      - ''
    result_parameters:
    - id: ''
      title: ''
      description: ''
      chart_info:
        default_visible: false
        unit: ''
        chart_type: scatter
        color: ''
##########        
  purpose: ''
- name: Saddle Gall Midge Model
  id: HAPDMA
  version: 0.0.3
  authors:
  - name: Charlotte Rowley, Andew Cherrill, Simon R. Leather, Tome W. Pope
    email: crowley@harper-adams.ac.uk
    organization: Centre for Integrated Pest Management
  pests:
  - HAPDMA
  crops:
  - TRZAS
  - HORVS
  #EPPO for spring wheat and spring barley
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/hapdma/Help/Api/POST-api-HAPDMA
  description: "A simple DSS which predicts the dates of emergence for the Saddle\
    \ Gall Midge based on a model derived by Rowley et al., 2017. Rainfall events\
    \ followed by an accumulation of 512 degree days above 0 degrees C can be used\
    \ to predict peaks.\nCumulative emergence as a function of degree day accumulations\
    \ was best described using a probit model.\nThe model will start on the date of\
    \ first rainfall on or after the 1st March and will end at the end of July.\n\
    A Rainfall event is described as daily rainfall over the rainfall threshold (default\
    \ 1mm) following 3 days without precipitation.\nOptional parameters can be inputted\
    \ to set the thresholds. If not inputted, the defaults described above will be\
    \ set.\nThe model will return the dates of peak emergence, cumulative emergence,\
    \ the associated risk and recommended action.\n\nSOURCE: \nASSUMPTIONS: \nREFERENCE: "
  citation:
  valid_spatial:
    countries:
    - GBR
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1002
      interval: 3600
    - parameter_code: 2001
      interval: 3600
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-03-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-07-31'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/hapdma/api/HAPDMA
    form_method: post #
    content_type: application/json
    input_schema: |
      {
          "type":"object",
          "properties": {  
            "modelId": {"type": "string", "pattern":"^HAPDMA$", "title": "Model Id", "default":"HAPDMA", "description":"Must be HAPDMA"},
            "weatherData": {
              "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
            },
            "optionalData" :{
              "title":"Optional parameters for the DSS",
              "type": "object",
              "properties": {
                "rain_threshold": {"type": "number", "default":"1","title": "Rainfall Threshold" },
                "dry_day": {"type": "number", "default":"3", "title": "Dry Day Threshold"},
                "temp_threshold": {"type": "number", "default":"0", "title": "Temperature Threshold"},
                "degree_day": {"type": "number", "default":"512", "title": "Degree Days"}
              }
            }
          },
          "required": ["modelId"]
      }
    input_schema_categories:
      hidden:
      - modelId
      internal:
      - optionalData.rain_threshold
      - optionalData.dry_day
      - optionalData.temp_threshold
      - optionalData.degree_day
  output:
    warning_status_interpretation:
    - explanation: ''
      recommended_action: ''
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: |-
        Green warning indicates that there is below 10% cumulative emergence. Currently low risk.
      recommended_action: Revisit regularly as risk can change rapidly.
    - explanation: |-
        Yellow warning indicates that there is up to 50% cumulative emergence.
      recommended_action: Check field to obtain first hand information about the need
        to take action.
    - explanation: |-
        Red warning indicates that there is up to or over 90% cumulative emergence.
      recommended_action: Walk around your field as soon as possible to enable you
        to decide on which action to take.
    chart_heading: Cumulative Emergence
    chart_groups:
    - id: G1
      title: Emergence
      result_parameter_ids:
      - Cumulative_Emergence
    result_parameters:
    - id: Cumulative_Emergence
      title: Cumulative Emergence.
      description: Cumulative percentage emergence as a function of degree day accumulations.
      chart_info:
        default_visible: true
        unit: count
        chart_type: line
        color: green
  purpose: ''
##########
- name: Codling moth flight model
  id: CARPPO
  version: 0.0.3
  authors:
  - name: Petros T. Damos, Nikos A. Kouloussis, Dimitris S. Koveos
    email: petrosdamos@gmail.com
    organization: Laboratory of Applied Zoology and Parasitology, School of Agriculture,
      Faculty of Agriculture, Forestry and Natural Environment, Thessaloniki, Greece
  platform_validated: true
  pests:
  - CARPPO
  crops:
  - MABSD ##EPPO for apple plant
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/carppo/Help/Api/POST-api-CARPPO
  description: |
    THE PEST: Codling moth (Cydia pomonella) cause damage to fruit of apples, pears and other pome fruit. Larvae emerge from eggs laid on the surface of the fruit and burrow inside. The resulting damage can reduce the value of fruit or make the fruit unsellable.  
    THE DECISION: Typically interventions are more effective at the start of male flight, rather than at peak flight periods.  
    THE MODEL: A 3-paramater non-linear regression model fits cumulative moth captures as a function of accumulated day degrees for all three of the male flights. 
    THE PARAMETERS: The model uses minimum and maximum temperature from the 1st of January. 
    SOURCE: Aristotle University, Greece. 
    ASSUMPTIONS: There may be three flight periods in southern Europe, one or two in northern europe. Predicted flight does not relate to numbers of codling moth or scale of damage caused.
  citation:
  valid_spatial:
    countries:
    - ALB
    - AND
    - BIH
    - HRV
    - GRC
    - ITA
    - MLT
    - MNE
    - MKD
    - PRT
    - SMR
    - SRB
    - SVN
    - ESP
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1003 # = Min air temp at 2m
      interval: 86400
    - parameter_code: 1004 # = Max air temp at 2m
      interval: 86400
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-01-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-09-30'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/carppo/api/carppo
    form_method: post
    content_type: application/json
    input_schema: |
      {
        "type":"object",
        "properties": {  
          "modelId": {"type": "string", "pattern":"^CARPPO$", "title": "Model Id", "default":"CARPPO", "description":"Must be CARPPO"},
          "weatherData": {
            "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
          },
          "optionalData" :{
            "title":"Optional parameters for the DSS",
            "type": "object",
            "properties": {
              "lower_threshold": {"type": "number", "default":"10.1", "title": "Lower Temperature Threshold" },
              "upper_threshold": {"type": "number", "default": "34.3", "title": "Upper Temperature Threshold" },
              "firstFlight_a": {"type": "number", "default": "98.7583", "title": "First Flight: Parameter a" },
              "firstFlight_b": {"type": "number", "default": "69.5118", "title": "First Flight: Parameter b" },        
              "firstFlight_y": {"type": "number", "default": "468.8300", "title": "First Flight: Parameter y" },         
              "secondFlight_a": {"type": "number", "default": "98.7505", "title": "Second Flight: Parameter a" },
              "secondFlight_b": {"type": "number", "default": "99.9595", "title": "Second Flight: Parameter b" },
              "secondFlight_y": {"type": "number", "default": "1130.9937", "title": "Second Flight: Parameter y" },
              "thirdFlight_a": {"type": "number", "default": "106.1449", "title": "Third Flight: Parameter a" },
              "thirdFlight_b": {"type": "number", "default": "110.2595", "title": "Third Flight: Parameter b" },        
              "thirdFlight_y": {"type": "number", "default": "1815.8485", "title": "Third Flight: Parameter y" } 
            }
          }            
        },
        "required": ["modelId"]
      }  
    input_schema_categories:
      hidden:
      - modelId
      internal:
      - optionalData.lower_threshold
      - optionalData.upper_threshold
      - optionalData.firstFlight_a
      - optionalData.firstFlight_b
      - optionalData.firstFlight_y
      - optionalData.secondFlight_a
      - optionalData.secondFlight_b
      - optionalData.secondFlight_y
      - optionalData.thirdFlight_a
      - optionalData.thirdFlight_b
      - optionalData.thirdFlight_y
  output:
    warning_status_interpretation:
    - explanation: |
      recommended_action: ''
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: Based on current data available, the model results indicate low current risk of male codling moth flight.
      recommended_action: This model runs March - August. Cumulative catches are predicted to be below 10% or above 65% of the  total flights.
    - explanation: Based on current data available, the model results indicate that conditions may soon be suitable for male codling moth flight.
      recommended_action: |-
        The risk of adult codling moth flight activity is increasing, which indicates that egg laying will soon occur on vulnerable fruit. Cumulative catches are predicted to be between 10% and 35% of the total flights. Increasing monitoring efforts in vulnerable crops, and apply suitable treatment according to need.
    - explanation: This model is currently collecting data to run. Based on current data available, the model results indicate conditions are currently suitable for male codling moth flight.
      recommended_action: |-
        This model runs March - August. The risk of adult codling moth flight activity is high, which indicates that egg laying will soon occur on vulnerable fruit. Cumulative catches are between 35% and 65% of total flights. Monitor vulnerable crops for in-field activity and apply suitable treatments according to need.
    chart_heading: Cumulative Captures
    chart_groups:
    - id: G1
      title: Cumulative Captures
      result_parameter_ids:
      - First_Flight_Cumulative_Captures
      - Second_Flight_Cumulative_Captures
      - Third_Flight_Cumulative_Captures
    result_parameters:
    - id: First_Flight_Cumulative_Captures
      title: First Flight Cumulative Captures
      description: The cumulative captures of the Codling Moth during their first
        flight.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: green
    - id: Second_Flight_Cumulative_Captures
      title: Second Flight Cumulative Captures
      description: The cumulative captures of the Codling Moth during their second
        flight.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: red
    - id: Third_Flight_Cumulative_Captures
      title: Third Flight Cumulative Captures
      description: The cumulative captures of the Codling Moth during their third
        flight.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: blue
  purpose: Estimates risk of flight and egg laying in pome fruit
###########
- name: BYDV TSUM model
  id: RHOPPA
  version: 0.0.1
  authors:
  - name: AHDB
    email: NA
    organization: AHDB
  platform_validated: true
  pests:
  - RHOPPA
  crops:
  - TRZAW
  - HORVW #EPPO for winter wheat and winter barley
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/rhoppa/Help/Api/POST-api-RHOPPA
  description: |
    THE PEST: Aphids can transmit barley/cereal yellow dwarf viruses (BYDV). Initially, aphids colonise relatively few crop plants. However, the second-generation (winged aphids) tends to move away from the plant originally colonised. Controlling this generation is a key part of a BYDV management strategy. 
    THE DECISION: Treatment may need to be applied where widespread emergence of BYDV carrying winged aphids is likely.   
    THE MODEL: The winged aphids are likely to be present when the accumulated daily air temperatures, above a baseline temperature of 3ºC, reaches T-Sum 170. 
    THE PARAMETERS: The model uses Date of last spray application, daily temperature 
    SOURCE: AHDB, UK. 
    ASSUMPTIONS: Need to specify crop (winter wheat or winter barley), and provide dates of any insecticide applications made to the crop. Treatment only required where a high proportion of aphids are carrying BYDV.
  citation:
  valid_spatial:
    countries:
    - GBR
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1001
      interval: 3600
    weather_data_period_start:
    - determined_by: INPUT_SCHEMA_PROPERTY
      value: optionalData.startDate
    - determined_by: FIXED_DATE
      value: '{PREVIOUS_YEAR}-10-01'
    weather_data_period_end:
    - determined_by: INPUT_SCHEMA_PROPERTY
      value: optionalData.endDate
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-06-30'  #'{CURRENT_YEAR}-03-31'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/rhoppa/api/RHOPPA
    form_method: post
    content_type: application/json
    input_schema: |
      {
          "type":"object",
          "properties": {  
            "modelId": {"type": "string", "pattern":"^RHOPPA$", "title": "Model Id", "default":"RHOPPA", "description":"Must be RHOPPA"},
            "weatherData": {
              "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
            },       
            "optionalData" :{ 
              "title":"Optional parameters for the DSS",
              "type": "object",
              "properties": {
                "startDate": {"type":"string","format": "date", "title": "Model Start Date/Emergence Date (YYYY-MM-DD)", "default": "{PREVIOUS_YEAR}-10-01"},
                "endDate": {"type":"string","format": "date", "title": "Model End Date/Growth Stage 31 (YYYY-MM-DD)", "default": "{CURRENT_YEAR}-03-31"},
                "dateOfLastSpray": {"type":"string","format": "date", "title": "Date of Last Spray (YYYY-MM-DD)"}
              }            
            }
          },
          "required": ["modelId"]
        }  
    input_schema_categories:
      hidden:
      - modelId
  output:
    warning_status_interpretation:
    - explanation: |
      recommended_action: ''
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: Based on current data available, the model results indicate low current risk of winged aphids spreading BYDV in crops.
      recommended_action: This model runs September - March. Update parameters when any insecticide applications are made.
    - explanation: Based on current data available, conditions are approaching 170 day-degrees over a base of 3*C.
      recommended_action: |-
        The risk of winged aphids being present in the crop is increasing, and may occur in following 3-5 days. Increasing monitoring efforts in vulnerable crops, and apply suitable treatment according to need.Update parameters when any insecticide applications are made.
    - explanation: Based on current data available, conditions have reasch or are above 170 day-degrees over a base of 3*C.
      recommended_action: |-
        The risk of winged aphids being present in the crop is high, winged aphids likely to be present in crop in coming days.  Monitor vulnerable crops for in-field activity and apply suitable treatments according to need. Update parameters when any insecticide applications are made.
    chart_heading: TSUM Model
    chart_groups:
    - id: G1
      title: TSUM
      result_parameter_ids:
      - T-Sum
    - id: G2
      title: Proportion of Day
      result_parameter_ids:
      - Proportion_1
      - Proportion_2
      - Proportion_3
    result_parameters:
      # the id is used with the model_id as the namespace
    - id: T-Sum
      title: T-Sum
      description: Cumulative day degrees over 3 degrees celsius.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: orange
    - id: Proportion_1
      title: Proportion of day where temperature exceeds 11 degrees C
      description: Proportion of day where temperature exceeds 11 degrees C
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: green
    - id: Proportion_2
      title: Proportion of day where temperature was below 6 degrees C
      description: Proportion of day where temperature was below 6 degrees C
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: red
    - id: Proportion_3
      title: Proportion of day where temperature was below 3 degrees C
      description: Proportion of day where temperature was below 3 degrees C
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: blue
  purpose: Estimates risk of transmission of virus by aphid vectors
##########
- name: Hutton Criteria Late Blight Model
  id: PHYTIN
  version: 0.0.1
  authors:
  - name: James Hutton
    email: NA
    organization: James Hutton institute, UK.
  platform_validated: true
  pests:
  - PHYTIN
  crops:
  - SOLTU #EPPO for potatos
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/choacu/Help/Api/POST-api-CHOACU
  description: |
    THE PEST: Potato late blight is a disease caused by a fungus-like organism (Phytophthora infestans) that spreads rapidly in the potato crop canopy and can also infect tubers. 
    THE DECISION: The model determines when weather conditions create high risk of infection, to guide targeting of fungicide treatment. 
    THE MODEL: A high risk 'Hutton Criteria' period occurs when two consecutive days have a minimum temperature of 10°C, and at least six hours of relative humidity at or above 90%. 
    THE PARAMETERS: The model uses daily air temperature and humidity 
    SOURCE: James Hutton institute, UK. Introduced in the UK for the 2017 season. Dancey et al. 2017 16th Euroblight workshop. 
    ASSUMPTIONS: The model does not account for higher temperatures or humidity which may occur under crop covers.
  citation:
  valid_spatial:
    countries:
    - GBR
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1001 # air temperature
      interval: 3600
    - parameter_code: 3001 # relative humidity
      interval: 3600
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-03-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-09-30'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/choacu/api/CHOACU
    form_method: post
    content_type: application/json
    input_schema: |
      {
          "type":"object",
          "properties": {  
            "modelId": {"type": "string", "pattern":"^CHOACU$", "title": "Model Id", "default":"CHOACU", "description":"Must be CHOACU"},
            "weatherData": {
              "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
            },
            "optionalData" :{   
              "title":"Optional parameters for the DSS", 
              "type": "object",
              "properties": {
                "minimumTemperatureThreshold": {"type": "number", "default":"10", "title": "Minimum Temperature Threshold"},
                "relativeHumidityThreshold": {"type": "number", "default":"90", "title": "Relative Humidity Threshold"},
                "consecutiveDays": {"type": "number", "default":"2","title": "Consecutive Days"}
              }
            }
          },
          "required": ["modelId"]
        }  
    input_schema_categories:
      hidden:
      - modelId
      internal:
      - optionalData.minimumTemperatureThreshold
      - optionalData.relativeHumidityThreshold
      - optionalData.consecutiveDays
  output:
    warning_status_interpretation:
    - explanation: 
      recommended_action: 
    - explanation: |-
        Missing data.
      recommended_action: Review error message.
    - explanation: Based on current weather data, the model indicates low blight risk. The risk will be updated each day as more weather data becomes available.
      recommended_action: This model runs during the potato growng season. Continue to check for risk updates  and monitor crops for late blight.
    - explanation: 
      recommended_action: 
    - explanation: Based on current weather data, the model indicates high blight risk. The risk will be updated each day as more weather data becomes available.
      recommended_action: This model runs during the potato growing season. Weather conditions are currently suitable for potato late blight outbreaks. Monitor potato crops and apply fungicide treatments against late blight, according to need.
    chart_heading: Hutton Criteria
    chart_groups:
    - id: G1
      title: PHYTIN
      result_parameter_ids:
      - Criteria_Exceedance
    result_parameters:
      # the id is used with the model_id as the namespace
    - id: Criteria_Exceedance
      title: Number of days exceeding the Hutton Criteria.
      description: Number of days exceeding the Hutton Criteria.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: orange
  purpose: Estimates risk of late blight
##########
- name: Septoria Leaf Blotch Model
  id: SEPTTR
  version: 0.0.1
  authors:
  - name: D.E. te Beest, M.W. Shaw, S. Pietravalle, F. van den Bosch
    email: NA
    organization: NA
  platform_validated: true
  pests:
  - SEPTTR
  crops:
  - TRZAW #EPPO for WINTER WHEAT
  keywords: none
  type_of_decision: Short-term tactical
  type_of_output: Risk indication
  description_URL: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/septtr/Help/Api/POST-api-SEPTTR
  description: |
    THE PEST: Septoria tritici blotch (Zymoseptoria tritici) affects the leaves of wheat crops and is particularly damaging to yield when it reduces the green canopy area of the upper leaves during grain filling.   
    THE DECISION: Fungicide treatment to protect the upper leaves may need to be applied between stem extension and ear emergence, before symptoms are visible on those leaves.  
    THE MODEL: At stem extension (growth stage 31) the model uses over-winter weather to estimate the potential for a damaging epidemic developing during the summer. This information can support treatment decisions.  It should be considered along with other risk factors, particularly: septoria resistance of the wheat variety, sowing date, location and weather conditions during the emergence of the upper leaves.  
    THE PARAMETERS: the model uses data on minimum temperature and rainfall over-winter.  
    SOURCE:  Rothamsted Research, UK. The model was developed, tested and published in 2009 and has not been implemented previously. te Beest et al. 2009 European Journal of Plant Pathology; te Beest et al. (2009) Plant Pathology.  
    ASSUMPTIONS: The model provides an early estimate of the potential for an epidemic and should be interpreted in combination with other risk factors. "
  citation:
  valid_spatial:
    countries:
    - GBR
    geoJSON: |-
      {}
  input:
    weather_parameters:
    - parameter_code: 1003 # minimum temperature
      interval: 86400
    - parameter_code: 2001 # rainfall
      interval: 3600
    weather_data_period_start:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-01-01'
    weather_data_period_end:
    - determined_by: FIXED_DATE
      value: '{CURRENT_YEAR}-06-30' #'{CURRENT_YEAR}-04-30'
  execution:
    type: ONTHEFLY
    endpoint: https://app-rsk-adas-dss-dev-001.azurewebsites.net/dss/septtr/api/SEPTTR
    form_method: post
    content_type: application/json
    input_schema: |
      {
          "type":"object",
          "properties": {  
            "modelId": {"type": "string", "pattern":"^SEPTTR$", "title": "Model Id", "default":"SEPTTR", "description":"Must be SEPTTR"},
            "weatherData": {
              "$ref": "https://ipmdecisions.nibio.no/api/wx/rest/schema/weatherdata"
            },
            "optionalData" :{   
              "title":"Optional parameters for the DSS", 
              "type": "object",
              "properties": {
                "minimumTemperatureThreshold": {"type": "number", "default":"0", "title": "Minimum Temperature Threshold"},
                "rainfallThreshold": {"type": "number", "default":"90", "title": "Rainfall Threshold"}
              }
            }
          },
          "required": ["modelId"]
        }  
    input_schema_categories:
      hidden:
      - modelId
      internal:
      - optionalData.minimumTemperatureThreshold
      - optionalData.rainfallThreshold
  output:
    warning_status_interpretation:
    - explanation: 
      recommended_action: ''
    - explanation: 
        Missing data.
      recommended_action: Review error message.
    - explanation: Based on over-winter weather, there is low potential for a damaging septoria tritici blotch epidemic. 
      recommended_action: Despite the low potential, a damaging epidemic could still occur, particularly on early sown crops of septoria susceptible varieties, if conditions are favourable for the disease during spring/summer 
    - explanation: 
      recommended_action: ''
    - explanation: Based on over-winter weather, there is high potential for a damaging septoria tritici blotch epidemic. 
      recommended_action: Whether this high potential for an epidemic is realised will depend on other risk factors, particularly date of sowing, the susceptibility of the wheat variety and weather conditions during spring/summer.
    chart_heading: Septoria Leaf Blotch
    chart_groups:
    - id: G1
      title: SEPTTR
      result_parameter_ids:
      - AccumulatedRainfall
      - AccumulatedTemperature
      - CalculatedRisk
    result_parameters:
      # the id is used with the model_id as the namespace
    - id: AccumulatedRainfall
      title: Accumulated Rainfall.
      description: Daily rainfall above 3mm accumulated in the 80-day period preceding
        growth stage 31.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: blue
    - id: AccumulatedRainfall
      title: Accumulated Temperature
      description: Daily minimum temperature above 0 degrees accumulated in a window
        that starts 120 days before growth stage 31 and ends 70 days before growth
        stage 31.
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: orange
    - id: CalculatedRisk
      title: Model Risk
      description: Model Risk
      chart_info:
        default_visible: true
        unit: Count
        chart_type: line
        color: red
  purpose: Estimates potential for septoria epidemics 
